# RESTful API 与数据库中文文档



## 一、API 通用定义

> URL（POST）： http://`ip`:`port`/api/`interface`/`{key_value_pairs}`

 `ip`

> 接口服务所在主机的 IP 地址

 `port`

> 5000 (默认)

`interface`

> - `interface`: 目前支持十二个接口地址，分别是 start_service_tank，record_data_tank，control_tank，start_service_missile，record_data_missile，control_missile，start_service_solider，record_data_solider，control_solider，start_service_trump，record_data_trump，control_trump。
> - \*\_start_service：运动体初始化服务接口，需要在启动UE动画前进行通讯
> - \*\_record_data：运动体实时数据记录与信息通讯启动接口，需要在启动UE动画前进行通讯
> - \*\_control_tank：运动体控制接口，启动前两项通讯后，随时可以进行通讯控制

 `{key_value_pairs}`

> - JSON 字符串
> - Content-Type：application/json
> - `key_value_pairs` :  JSON 键值对
> - 前期以简化输入输出为原则，暂时没有输入数据类型判定，后期可以增加输入类型判定与UUID通讯信息等功能。

返回情况：

> - Serialized JSON 字符串
> - Content-Type：application/json
> - 注意“msg”中的中文返回，编码格式为Unicode，这个返回的目的仅是帮助通讯侧快速调试。
> - 后期可以考虑增加错误代码等功能。



## 二、API 接口说明



### 1. 坦克初始化服务接口

##### （1）接口名称

> start_service_tank

##### （2）接口地址

> http://`ip`:`port`/api/start_service_tank/`{key_value_pairs}`

##### （3）接口方式

POST
##### （4）接口功能

> 启动初始化服务，将 UE4 中各个坦克的编号、名称、通讯地址等数据记录在坦克信息初始化数据库中，并为后续储存进一步坦克数据信息或控制坦克提供通讯拓扑依据。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                         |
| ----------------- | ------ | ------------------ | ---------------------------- |
| host              | string | True               | 接口服务所在的 IP 地址       |
| port              | int    | True               | 接口服务所在 IP 地址端口     |
| db                | string | True               | 坦克信息初始化数据库的名称   |
| db_table          | string | True               | 坦克信息初始化数据库表的名称 |

##### （6）请求示例

```json
{
    "data": {
        "host": "127.0.0.1",
        "port": 10001,
        "db":"tank_init.db",
        "db_table": "task1"
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型       | 说明                                 |
| -------------- | ---------- | ------------------------------------ |
| stat           | int        | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string     | 成功信息或错误信息                   |
| data           | dictionary |                                      |

| data 包含的子键名 | 类型       | 说明                                                         |
| ----------------- | ---------- | ------------------------------------------------------------ |
| origin_coordinate | list       | 值对应动态坐标系的原点坐标在 UE4 中的静态坐标位置，接收后可用于坐标系数据转换 |
| info_dict         | dictionary | 记录了各个坦克名称对应的 id号、IP地址、端口号                |

| origin_coordinate 包含的子元素 | 类型  | 说明                                            |
| ------------------------------ | ----- | ----------------------------------------------- |
| `ox`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 x 分量 |
| `oy`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 y 分量 |
| `oz`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 z 分量 |

| info_dict 包含的子键名 | 类型 | 说明                                                         |
| ---------------------- | ---- | ------------------------------------------------------------ |
| `tank_name`            | list | 键名是各个坦克名称，对应的 list 子元素包括坦克的编号、名称、通讯地址等数据 |

| `tank_name` list 包含的子元素 | 类型   | 说明                     |
| ----------------------------- | ------ | ------------------------ |
| `id`                          | int    | 坦克 id 编号             |
| `ip`                          | string | 坦克所在服务器的 IP 地址 |
| `port`                        | int    | 该坦克对应的端口         |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!",
    "data": {
        "origin_coordinate": [
            6000.0,
            6000.0,
            120.0
        ],
        "info_dict": {
            "TK_AI": [
                0,
                "127.0.0.1",
                20000
            ],
            "TK_AI2": [
                1,
                "127.0.0.1",
                20001
            ],
            "TK_AI3": [
                2,
                "127.0.0.1",
                20002
            ]
        }
    }
}
```



### 2. 坦克数据记录与信息通讯启动接口

##### （1）接口名称

> record_data_tank

##### （2）接口地址

> http://`ip`:`port`/api/record_data_tank/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动各个坦克的实时数据记录功能，记录频率为 60 Hz，并为各个坦克生成通讯体，方便后续对各个坦克的动作控制进行通讯。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                                                         |
| ----------------- | ------ | ------------------ | ------------------------------------------------------------ |
| db                | string | True               | 记录坦克实时数据的数据库名称，每个坦克都有一个表来单独记录各自数据，表的名称就是坦克 id 编号。 |
| record_all        | int    | True               | `1` 对应记录所有坦克的实时数据信息，当前只允许输入值`1`，未来支持部分坦克不记录实时数据，到时候可输入 `0` 与需要记录实时数据的坦克名称或编号 list，当前先保留此键值。 |

##### （6）请求示例

```json
{
    "data": {
        "db": "tank_record.db",
        "record_all": 1
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 3. 坦克控制接口

##### （1）接口名称

> control_tank

##### （2）接口地址

>  http://`ip`:`port`/api/control_tank/`{key_value_pairs}`

##### （3）接口方式

> POST

##### （4）接口功能

> 对各个坦克进行控制，支持两种可选的控制方式：1. 给目的地坐标，自主移动；2. 通过油门和转向控制坦克移动。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型       | 是否必填或必填条件 | 说明                                     |
| ----------------- | ---------- | ------------------ | ---------------------------------------- |
| `tank_name`       | dictionary | True               | 此键名为坦克名称，对应的值是坦克控制数据 |

| `tank_name`包含的子键名 | 类型       | 是否必填或必填条件 | 说明         |
| ----------------------- | ---------- | ------------------ | ------------ |
| data                    | dictionary | True               | 坦克控制数据 |

| `tank_name`的子键 data 包含的子健名 | 类型       | 是否必填或必填条件 | 说明                                                         |
| ----------------------------------- | ---------- | ------------------ | ------------------------------------------------------------ |
| option                              | int        | True               | 坦克控制方式，为 `0` 时，选择目的地坐标到达模式，为 `1` 时，选择油门与转向控制模式 |
| destination                         | dictionary | option值为 `0`     | 目的地坐标到达模式                                           |
| control                             | dictionary | option值为 `1`     | 油门与转向控制模式                                           |

| destination 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                          |
| ------------------------ | ----- | ------------------ | ----------------------------- |
| lng                      | float | True               | 目的地在WGS84坐标系中的经度值 |
| lat                      | float | True               | 目的地在WGS84坐标系中的纬度值 |
| alt                      | float | True               | 目的地在WGS84坐标系中的高程值 |

| control 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                                   |
| -------------------- | ----- | ------------------ | -------------------------------------- |
| steering             | float | True               | 转向，范围是 [-1.0,1.0]                |
| throttle             | float | True               | 油门，范围是 [-1.0,1.0]                |
| handbrake            | bool  | True               | 刹车，`true`为刹车，`false` 为解除刹车 |

##### （6）请求示例

```json
{
    "data": {
        "TK_AI2": {
            "data": {
                "option": 1,
                "control": {
                    "steering": 0.0,
                    "throttle": 1.0,
                    "handbrake": false
                }
            }
        },
        "TK_AI": {
            "data": {
                "option": 0,
                "destination": {
                    "lng": 116.174893,
                    "lat": 40.055154,
                    "alt": 150.0
                }
            }
        }
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 4. 导弹初始化服务接口

##### （1）接口名称

> start_service_missile

##### （2）接口地址

> http://`ip`:`port`/api/start_service_missile/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动初始化服务，将 UE4 中各个导弹的编号、名称、通讯地址等数据记录在导弹信息初始化数据库中，并为后续储存进一步导弹数据信息或控制导弹提供通讯拓扑依据。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                         |
| ----------------- | ------ | ------------------ | ---------------------------- |
| host              | string | True               | 接口服务所在的 IP 地址       |
| port              | int    | True               | 接口服务所在 IP 地址端口     |
| db                | string | True               | 导弹信息初始化数据库的名称   |
| db_table          | string | True               | 导弹信息初始化数据库表的名称 |

##### （6）请求示例

```json
{
    "data": {
        "host": "127.0.0.1",
        "port": 10002,
        "db":"missile_init.db",
        "db_table": "task1"
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型       | 说明                                 |
| -------------- | ---------- | ------------------------------------ |
| stat           | int        | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string     | 成功信息或错误信息                   |
| data           | dictionary |                                      |

| data 包含的子键名 | 类型       | 说明                                                         |
| ----------------- | ---------- | ------------------------------------------------------------ |
| origin_coordinate | list       | 值对应动态坐标系的原点坐标在 UE4 中的静态坐标位置，接收后可用于坐标系数据转换 |
| info_dict         | dictionary | 记录了各个导弹名称对应的 id号、IP地址、端口号                |

| origin_coordinate 包含的子元素 | 类型  | 说明                                            |
| ------------------------------ | ----- | ----------------------------------------------- |
| `ox`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 x 分量 |
| `oy`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 y 分量 |
| `oz`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 z 分量 |

| info_dict 包含的子键名 | 类型 | 说明                                                         |
| ---------------------- | ---- | ------------------------------------------------------------ |
| `missile_name`         | list | 键名是各个导弹名称，对应的 list 子元素包括导弹的编号、名称、通讯地址等数据 |

| `tank_name` list 包含的子元素 | 类型   | 说明                     |
| ----------------------------- | ------ | ------------------------ |
| `id`                          | int    | 导弹 id 编号             |
| `ip`                          | string | 导弹所在服务器的 IP 地址 |
| `port`                        | int    | 该导弹对应的端口         |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!",
    "data": {
        "origin_coordinate": [
            6000.0,
            6000.0,
            120.0
        ],
        "info_dict": {
            "MIS_AI": [
                0,
                "127.0.0.1",
                30000
            ],
            "MIS_AI2": [
                1,
                "127.0.0.1",
                30001
            ],
            "MIS_AI3": [
                2,
                "127.0.0.1",
                30002
            ]
        }
    }
}
```



### 5. 导弹数据记录与信息通讯启动接口

##### （1）接口名称

> record_data_missile

##### （2）接口地址

> http://`ip`:`port`/api/record_data_missile/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动各个导弹的实时数据记录功能，记录频率为 60 Hz，并为各个导弹生成通讯体，方便后续对各个导弹的动作控制进行通讯。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                                                         |
| ----------------- | ------ | ------------------ | ------------------------------------------------------------ |
| db                | string | True               | 记录导弹实时数据的数据库名称，每个导弹都有一个表来单独记录各自数据，表的名称就是导弹 id 编号。 |
| record_all        | int    | True               | `1` 对应记录所有导弹的实时数据信息，当前只允许输入值`1`，未来支持部分导弹不记录实时数据，到时候可输入 `0` 与需要记录实时数据的导弹名称或编号 list，当前先保留此键值。 |

##### （6）请求示例

```json
{
    "data": {
        "db": "missile_record.db",
        "record_all": 1
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 6. 导弹控制接口

##### （1）接口名称

> control_missile

##### （2）接口地址

>  http://`ip`:`port`/api/control_missile/`{key_value_pairs}`

##### （3）接口方式

> POST

##### （4）接口功能

> 对各个导弹进行控制，有两种相配合的控制方式：1. 目标瞄准：锁定目标的GPS坐标，对目标进行不断瞄准，发射前后均可瞄准；2. 导弹发射：发射导弹。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型       | 是否必填或必填条件 | 说明                                     |
| ----------------- | ---------- | ------------------ | ---------------------------------------- |
| `missile_name`    | dictionary | True               | 此键名为导弹名称，对应的值是导弹控制数据 |

| `tank_name`包含的子键名 | 类型       | 是否必填或必填条件 | 说明         |
| ----------------------- | ---------- | ------------------ | ------------ |
| data                    | dictionary | True               | 导弹控制数据 |

| `missile_name`的子键 data 包含的子健名 | 类型       | 是否必填或必填条件 | 说明                                                         |
| -------------------------------------- | ---------- | ------------------ | ------------------------------------------------------------ |
| option                                 | int        | True               | 导弹控制方式，为 `0` 时，告诉导弹目标的GPS坐标位置，为 `1` 时，则发射导弹，导弹发射前后，都可以通信目标位置 |
| destination                            | dictionary | option值为 `0`     | 目标的 GPS 坐标位置                                          |

| destination 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                        |
| ------------------------ | ----- | ------------------ | --------------------------- |
| lng                      | float | True               | 目标在WGS84坐标系中的经度值 |
| lat                      | float | True               | 目标在WGS84坐标系中的纬度值 |
| alt                      | float | True               | 目标在WGS84坐标系中的高程值 |

##### （6）请求示例

```json
{
    "data": {
        "MIS_AI2": {
            "data": {
                "option": 1,
            }
        },
        "MIS_AI": {
            "data": {
                "option": 0,
                "destination": {
                    "lng": 116.174893,
                    "lat": 40.055154,
                    "alt": 150.0
                }
            }
        }
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 7. 士兵初始化服务接口

##### （1）接口名称

> start_service_solider

##### （2）接口地址

> http://`ip`:`port`/api/start_service_solider/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动初始化服务，将 UE4 中各个士兵的编号、名称、通讯地址等数据记录在士兵信息初始化数据库中，并为后续储存进一步士兵数据信息或控制士兵提供通讯拓扑依据。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                         |
| ----------------- | ------ | ------------------ | ---------------------------- |
| host              | string | True               | 接口服务所在的 IP 地址       |
| port              | int    | True               | 接口服务所在 IP 地址端口     |
| db                | string | True               | 士兵信息初始化数据库的名称   |
| db_table          | string | True               | 士兵信息初始化数据库表的名称 |

##### （6）请求示例

```json
{
    "data": {
        "host": "127.0.0.1",
        "port": 10003,
        "db":"solider_init.db",
        "db_table": "task1"
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型       | 说明                                 |
| -------------- | ---------- | ------------------------------------ |
| stat           | int        | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string     | 成功信息或错误信息                   |
| data           | dictionary |                                      |

| data 包含的子键名 | 类型       | 说明                                                         |
| ----------------- | ---------- | ------------------------------------------------------------ |
| origin_coordinate | list       | 值对应动态坐标系的原点坐标在 UE4 中的静态坐标位置，接收后可用于坐标系数据转换 |
| info_dict         | dictionary | 记录了各个士兵名称对应的 id号、IP地址、端口号                |

| origin_coordinate 包含的子元素 | 类型  | 说明                                            |
| ------------------------------ | ----- | ----------------------------------------------- |
| `ox`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 x 分量 |
| `oy`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 y 分量 |
| `oz`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 z 分量 |

| info_dict 包含的子键名 | 类型 | 说明                                                         |
| ---------------------- | ---- | ------------------------------------------------------------ |
| `solider_name`         | list | 键名是各个士兵名称，对应的 list 子元素包括士兵的编号、名称、通讯地址等数据 |

| `solider_name` list 包含的子元素 | 类型   | 说明                     |
| -------------------------------- | ------ | ------------------------ |
| `id`                             | int    | 士兵 id 编号             |
| `ip`                             | string | 士兵所在服务器的 IP 地址 |
| `port`                           | int    | 该士兵对应的端口         |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!",
    "data": {
        "origin_coordinate": [
            6000.0,
            6000.0,
            120.0
        ],
        "info_dict": {
            "SOL_AI": [
                0,
                "127.0.0.1",
                40000
            ],
            "SOL_AI2": [
                1,
                "127.0.0.1",
                40001
            ],
            "SOL_AI3": [
                2,
                "127.0.0.1",
                40002
            ]
        }
    }
}
```



### 8. 士兵数据记录与信息通讯启动接口

##### （1）接口名称

> record_data_solider

##### （2）接口地址

> http://`ip`:`port`/api/record_data_solider/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动各个士兵的实时数据记录功能，记录频率为 60 Hz，并为各个士兵生成通讯体，方便后续对各个士兵的动作控制进行通讯。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                                                         |
| ----------------- | ------ | ------------------ | ------------------------------------------------------------ |
| db                | string | True               | 记录士兵实时数据的数据库名称，每个士兵都有一个表来单独记录各自数据，表的名称就是士兵 id 编号。 |
| record_all        | int    | True               | `1` 对应记录所有士兵的实时数据信息，当前只允许输入值`1`，未来支持部分士兵不记录实时数据，到时候可输入 `0` 与需要记录实时数据的士兵名称或编号 list，当前先保留此键值。 |

##### （6）请求示例

```json
{
    "data": {
        "db": "solider_record.db",
        "record_all": 1
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 9. 士兵控制接口

##### （1）接口名称

> control_solider

##### （2）接口地址

>  http://`ip`:`port`/api/control_solider/`{key_value_pairs}`

##### （3）接口方式

> POST

##### （4）接口功能

> 对各个士兵进行控制，支持两种可选的控制方式：1. 给目的地坐标，自主移动；2. 通过向前（向北）和向右（向东）控制士兵移动。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型       | 是否必填或必填条件 | 说明                                     |
| ----------------- | ---------- | ------------------ | ---------------------------------------- |
| `solider_name`    | dictionary | True               | 此键名为士兵名称，对应的值是士兵控制数据 |

| `solider_name`包含的子键名 | 类型       | 是否必填或必填条件 | 说明         |
| -------------------------- | ---------- | ------------------ | ------------ |
| data                       | dictionary | True               | 士兵控制数据 |

| `solider_name`的子键 data 包含的子健名 | 类型       | 是否必填或必填条件 | 说明                                                         |
| -------------------------------------- | ---------- | ------------------ | ------------------------------------------------------------ |
| option                                 | int        | True               | 士兵控制方式，为 `0` 时，选择目的地坐标到达模式，为 `1` 时，选择向前与向右控制模式，为 `2` 时，士兵如果在椅子旁边，就会坐下，为 `3` 时，士兵做出死亡动作并消失。 |
| destination                            | dictionary | option值为 `0`     | 目的地坐标到达模式                                           |
| control                                | dictionary | option值为 `1`     | 向前（向北）与向右（向东）控制模式                           |

| destination 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                          |
| ------------------------ | ----- | ------------------ | ----------------------------- |
| lng                      | float | True               | 目的地在WGS84坐标系中的经度值 |
| lat                      | float | True               | 目的地在WGS84坐标系中的纬度值 |
| alt                      | float | True               | 目的地在WGS84坐标系中的高程值 |

| control 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                            |
| -------------------- | ----- | ------------------ | ------------------------------- |
| forward              | float | True               | 向前（向北），范围是 [-1.0,1.0] |
| right                | float | True               | 向右（向东），范围是 [-1.0,1.0] |

##### （6）请求示例

```json
{
    "data": {
        "SOL_AI2": {
            "data": {
                "option": 1,
                "control": {
                    "forward": 0.2,
                    "right": 0.0
                }
            }
        },
        "SOL_AI3": {
            "data": {
                "option": 2
            }
        },
        "SOL_AI4": {
            "data": {
                "option": 3
            }
        },
        "SOL_AI": {
            "data": {
                "option": 0,
                "destination": {
                    "lng": 116.174893,
                    "lat": 40.055154,
                    "alt": 150.0
                }
            }
        }
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 10. 特朗普初始化服务接口

##### （1）接口名称

> start_service_trump

##### （2）接口地址

> http://`ip`:`port`/api/start_service_trump/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动初始化服务，将 UE4 中各个特朗普的编号、名称、通讯地址等数据记录在特朗普信息初始化数据库中，并为后续储存进一步特朗普数据信息或控制特朗普提供通讯拓扑依据。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                           |
| ----------------- | ------ | ------------------ | ------------------------------ |
| host              | string | True               | 接口服务所在的 IP 地址         |
| port              | int    | True               | 接口服务所在 IP 地址端口       |
| db                | string | True               | 特朗普信息初始化数据库的名称   |
| db_table          | string | True               | 特朗普信息初始化数据库表的名称 |

##### （6）请求示例

```json
{
    "data": {
        "host": "127.0.0.1",
        "port": 10004,
        "db":"trump_init.db",
        "db_table": "task1"
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型       | 说明                                 |
| -------------- | ---------- | ------------------------------------ |
| stat           | int        | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string     | 成功信息或错误信息                   |
| data           | dictionary |                                      |

| data 包含的子键名 | 类型       | 说明                                                         |
| ----------------- | ---------- | ------------------------------------------------------------ |
| origin_coordinate | list       | 值对应动态坐标系的原点坐标在 UE4 中的静态坐标位置，接收后可用于坐标系数据转换 |
| info_dict         | dictionary | 记录了各个特朗普名称对应的 id号、IP地址、端口号              |

| origin_coordinate 包含的子元素 | 类型  | 说明                                            |
| ------------------------------ | ----- | ----------------------------------------------- |
| `ox`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 x 分量 |
| `oy`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 y 分量 |
| `oz`                           | float | UE动态坐标系的原点在UE静态坐标系中坐标的 z 分量 |

| info_dict 包含的子键名 | 类型 | 说明                                                         |
| ---------------------- | ---- | ------------------------------------------------------------ |
| `trump_name`           | list | 键名是各个特朗普名称，对应的 list 子元素包括特朗普的编号、名称、通讯地址等数据 |

| `solider_name` list 包含的子元素 | 类型   | 说明                             |
| -------------------------------- | ------ | -------------------------------- |
| `id`                             | int    | 特朗普 id 编号，允许有多个特朗普 |
| `ip`                             | string | 特朗普所在服务器的 IP 地址       |
| `port`                           | int    | 该特朗普对应的端口               |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!",
    "data": {
        "origin_coordinate": [
            6000.0,
            6000.0,
            120.0
        ],
        "info_dict": {
            "TP_AI": [
                0,
                "127.0.0.1",
                50000
            ],
            "TP_AI2": [
                1,
                "127.0.0.1",
                50001
            ],
            "TP_AI3": [
                2,
                "127.0.0.1",
                50002
            ]
        }
    }
}
```



### 11. 特朗普数据记录与信息通讯启动接口

##### （1）接口名称

> record_data_trump

##### （2）接口地址

> http://`ip`:`port`/api/record_data_trump/`{key_value_pairs}`

##### （3）接口方式

POST

##### （4）接口功能

> 启动各个特朗普的实时数据记录功能，记录频率为 60 Hz，并为各个特朗普生成通讯体，方便后续对各个特朗普的动作控制进行通讯。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型   | 是否必填或必填条件 | 说明                                                         |
| ----------------- | ------ | ------------------ | ------------------------------------------------------------ |
| db                | string | True               | 记录特朗普实时数据的数据库名称，每个特朗普都有一个表来单独记录各自数据，表的名称就是特朗普 id 编号。 |
| record_all        | int    | True               | `1` 对应记录所有特朗普的实时数据信息，当前只允许输入值`1`，未来支持部分特朗普不记录实时数据，到时候可输入 `0` 与需要记录实时数据的特朗普名称或编号 list，当前先保留此键值。 |

##### （6）请求示例

```json
{
    "data": {
        "db": "trump_record.db",
        "record_all": 1
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```



### 12. 特朗普控制接口

##### （1）接口名称

> control_trump

##### （2）接口地址

>  http://`ip`:`port`/api/control_trump/`{key_value_pairs}`

##### （3）接口方式

> POST

##### （4）接口功能

> 对各个特朗普进行控制，支持两种可选的控制方式：1. 给目的地坐标，自主移动；2. 通过向前（向北）和向右（向东）控制特朗普移动。

##### （5）请求内容

| 请求内容的键名 | 类型       | 是否必填或必填条件 | 说明 |
| -------------- | ---------- | ------------------ | ---- |
| data           | dictionary | True               |      |

| data 包含的子键名 | 类型       | 是否必填或必填条件 | 说明                                         |
| ----------------- | ---------- | ------------------ | -------------------------------------------- |
| `trump_name`      | dictionary | True               | 此键名为特朗普名称，对应的值是特朗普控制数据 |

| `trump_name`包含的子键名 | 类型       | 是否必填或必填条件 | 说明           |
| ------------------------ | ---------- | ------------------ | -------------- |
| data                     | dictionary | True               | 特朗普控制数据 |

| `trump_name`的子键 data 包含的子健名 | 类型       | 是否必填或必填条件 | 说明                                                         |
| ------------------------------------ | ---------- | ------------------ | ------------------------------------------------------------ |
| option                               | int        | True               | 特朗普控制方式，为 `0` 时，选择目的地坐标到达模式，为 `1` 时，选择向前与向右控制模式，为 `2` 时，特朗普如果在椅子旁边，就会坐下，为 `3` 时，特朗普做出死亡动作并消失。 |
| destination                          | dictionary | option值为 `0`     | 目的地坐标到达模式                                           |
| control                              | dictionary | option值为 `1`     | 向前（向北）与向右（向东）控制模式                           |

| destination 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                          |
| ------------------------ | ----- | ------------------ | ----------------------------- |
| lng                      | float | True               | 目的地在WGS84坐标系中的经度值 |
| lat                      | float | True               | 目的地在WGS84坐标系中的纬度值 |
| alt                      | float | True               | 目的地在WGS84坐标系中的高程值 |

| control 包含的子健名 | 类型  | 是否必填或必填条件 | 说明                            |
| -------------------- | ----- | ------------------ | ------------------------------- |
| forward              | float | True               | 向前（向北），范围是 [-1.0,1.0] |
| right                | float | True               | 向右（向东），范围是 [-1.0,1.0] |

##### （6）请求示例

```json
{
    "data": {
        "TP_AI2": {
            "data": {
                "option": 1,
                "control": {
                    "forward": 0.2,
                    "right": 0.0
                }
            }
        },
        "TP_AI3": {
            "data": {
                "option": 2
            }
        },
        "TP_AI4": {
            "data": {
                "option": 3
            }
        },
        "TP_AI": {
            "data": {
                "option": 0,
                "destination": {
                    "lng": 116.174893,
                    "lat": 40.055154,
                    "alt": 150.0
                }
            }
        }
    }
}
```



##### （7）返回结果

| 返回结果的键名 | 类型   | 说明                                 |
| -------------- | ------ | ------------------------------------ |
| stat           | int    | 状态信息，`0` 表示成功，`1` 表示错误 |
| msg            | string | 成功信息或错误信息                   |

##### （8）返回结果示例

```json
{
    "stat": 0,
    "msg": "Success!"
}
```





## 三、数据库信息

### 1. 坦克信息初始化数据库

##### （1）数据库文件

> tank_init.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库是记录初始化时各个坦克的名称、ID、通讯地址之间的关系，数据库名称不需要变更。

##### （4）表名称

> - 对每次的 UE4 任务，需要给各个坦克的名称、ID、通讯地址之间的关系建立一个新表。
> - 表的名称可以随意取，例如 ”task1”。

##### （5）表数据类型

| 字段名称 | 类型 | 说明                                                      |
| -------- | ---- | --------------------------------------------------------- |
| ID       | INT  | 坦克编号                                                  |
| NAME     | CHAR | 坦克名称                                                  |
| IP       | CHAR | 坦克所在环境的 IP                                         |
| PORT     | INT  | 坦克对应的端口                                            |
| OX       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 x 分量，单位是 cm |
| OY       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 y 分量，单位是 cm |
| OZ       | RAEL | UE4 动态坐标系原点在 UE4 静态坐标系中的 z 分量，单位是 cm |

<img src="./figs/tk1.png" alt="tk1" style="zoom:50%;" />

##### （6）表示例

<img src="./figs/tk2.png" alt="tk2" style="zoom:50%;" />



### 2. 坦克实时数据存储数据库

##### （1）数据库文件

> tank_record.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库用来记录是各个坦克的实时状况数据，对于不同的任务可以创建新的数据库，用程序手动创建，也可以不换数据库，因为时间不同，记录的数据的意义也不同。

##### （4）表名称

> 每个坦克都有一个表来单独记录各自数据，表的名称就是坦克 id 编号，例如 “ID0” 或 “ID1“。

##### （5）表数据类型

| 字段名称  | 类型 | 说明                                     |
| --------- | ---- | ---------------------------------------- |
| ID        | INT  | 坦克编号                                 |
| NAME      | CHAR | 坦克名称                                 |
| IP        | CHAR | 坦克所在环境的 IP                        |
| PORT      | INT  | 坦克对应的端口                           |
| TIME      | CHAR | 记录的时间                               |
| TIMESTAMP | INT  | 记录的时间戳，可用于排序                 |
| PX        | REAL | 坦克在静态坐标系中 x 分量的值，单位是 cm |
| PY        | REAL | 坦克在静态坐标系中 y 分量的值，单位是 cm |
| PZ        | REAL | 坦克在静态坐标系中 z 分量的值，单位是 cm |
| ROLL      | REAL | 坦克的 roll 姿态角                       |
| PITCH     | REAL | 坦克的 pitch 姿态角                      |
| YOW       | REAL | 坦克的 yow 姿态角                        |
| LNG       | REAL | WGS84 GPS坐标系下的坦克经度值            |
| LAT       | REAL | WGS84 GPS坐标系下的坦克纬度值            |
| ALT       | REAL | WGS84 GPS坐标系下的坦克高程值            |

<img src="./figs/tk3.png" alt="tk3" style="zoom:50%;" />

##### （6）表示例

![tk4](./figs/tk4.png)

### 3. 导弹信息初始化数据库

##### （1）数据库文件

> missile_init.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库是记录初始化时各个导弹的名称、ID、通讯地址之间的关系，数据库名称不需要变更。

##### （4）表名称

> - 对每次的 UE4 任务，需要给各个导弹的名称、ID、通讯地址之间的关系建立一个新表。
> - 表的名称可以随意取，例如 ”task1”。

##### （5）表数据类型

| 字段名称 | 类型 | 说明                                                      |
| -------- | ---- | --------------------------------------------------------- |
| ID       | INT  | 导弹编号                                                  |
| NAME     | CHAR | 导弹名称                                                  |
| IP       | CHAR | 导弹所在环境的 IP                                         |
| PORT     | INT  | 导弹对应的端口                                            |
| OX       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 x 分量，单位是 cm |
| OY       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 y 分量，单位是 cm |
| OZ       | RAEL | UE4 动态坐标系原点在 UE4 静态坐标系中的 z 分量，单位是 cm |

<img src="./figs/tk1.png" alt="tk1" style="zoom:50%;" />

##### （6）表示例

<img src="./figs/mis1.png" alt="mis1" style="zoom:50%;" />



### 4. 导弹实时数据存储数据库

##### （1）数据库文件

> missile_record.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库用来记录是各个导弹的实时状况数据，对于不同的任务可以创建新的数据库，用程序手动创建，也可以不换数据库，因为时间不同，记录的数据的意义也不同。

##### （4）表名称

> 每个导弹都有一个表来单独记录各自数据，表的名称就是导弹 id 编号，例如 “ID0” 或 “ID1“。

##### （5）表数据类型

| 字段名称  | 类型 | 说明                                     |
| --------- | ---- | ---------------------------------------- |
| ID        | INT  | 导弹编号                                 |
| NAME      | CHAR | 导弹名称                                 |
| IP        | CHAR | 导弹所在环境的 IP                        |
| PORT      | INT  | 导弹对应的端口                           |
| TIME      | CHAR | 记录的时间                               |
| TIMESTAMP | INT  | 记录的时间戳，可用于排序                 |
| PX        | REAL | 导弹在静态坐标系中 x 分量的值，单位是 cm |
| PY        | REAL | 导弹在静态坐标系中 y 分量的值，单位是 cm |
| PZ        | REAL | 导弹在静态坐标系中 z 分量的值，单位是 cm |
| ROLL      | REAL | 导弹的 roll 姿态角                       |
| PITCH     | REAL | 导弹的 pitch 姿态角                      |
| YOW       | REAL | 导弹的 yow 姿态角                        |
| LNG       | REAL | WGS84 GPS坐标系下的导弹经度值            |
| LAT       | REAL | WGS84 GPS坐标系下的导弹纬度值            |
| ALT       | RAEL | WGS84 GPS坐标系下的导弹高程值            |

<img src="./figs/tk3.png" alt="tk3" style="zoom:50%;" />

##### （6）表示例

<img src="./figs/mis2.png" alt="mis2"  />

### 5. 士兵信息初始化数据库

##### （1）数据库文件

> solider_init.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库是记录初始化时各个士兵的名称、ID、通讯地址之间的关系，数据库名称不需要变更。

##### （4）表名称

> - 对每次的 UE4 任务，需要给各个士兵的名称、ID、通讯地址之间的关系建立一个新表。
> - 表的名称可以随意取，例如 ”task1”。

##### （5）表数据类型

| 字段名称 | 类型 | 说明                                                      |
| -------- | ---- | --------------------------------------------------------- |
| ID       | INT  | 士兵编号                                                  |
| NAME     | CHAR | 士兵名称                                                  |
| IP       | CHAR | 士兵所在环境的 IP                                         |
| PORT     | INT  | 士兵对应的端口                                            |
| OX       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 x 分量，单位是 cm |
| OY       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 y 分量，单位是 cm |
| OZ       | RAEL | UE4 动态坐标系原点在 UE4 静态坐标系中的 z 分量，单位是 cm |

<img src="./figs/tk1.png" alt="tk1" style="zoom:50%;" />

##### （6）表示例

<img src="./figs/sol1.png" alt="sol1" style="zoom:50%;" />



### 6. 士兵实时数据存储数据库

##### （1）数据库文件

> solider_record.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库用来记录是各个士兵的实时状况数据，对于不同的任务可以创建新的数据库，用程序手动创建，也可以不换数据库，因为时间不同，记录的数据的意义也不同。

##### （4）表名称

> 每个士兵都有一个表来单独记录各自数据，表的名称就是士兵 id 编号，例如 “ID0” 或 “ID1“。

##### （5）表数据类型

| 字段名称  | 类型 | 说明                                     |
| --------- | ---- | ---------------------------------------- |
| ID        | INT  | 士兵编号                                 |
| NAME      | CHAR | 士兵名称                                 |
| IP        | CHAR | 士兵所在环境的 IP                        |
| PORT      | INT  | 士兵对应的端口                           |
| TIME      | CHAR | 记录的时间                               |
| TIMESTAMP | INT  | 记录的时间戳，可用于排序                 |
| PX        | REAL | 士兵在静态坐标系中 x 分量的值，单位是 cm |
| PY        | REAL | 士兵在静态坐标系中 y 分量的值，单位是 cm |
| PZ        | REAL | 士兵在静态坐标系中 z 分量的值，单位是 cm |
| ROLL      | REAL | 士兵的 roll 姿态角                       |
| PITCH     | REAL | 士兵的 pitch 姿态角                      |
| YOW       | REAL | 士兵的 yow 姿态角                        |
| LNG       | REAL | WGS84 GPS坐标系下的士兵经度值            |
| LAT       | REAL | WGS84 GPS坐标系下的士兵纬度值            |
| ALT       | RAEL | WGS84 GPS坐标系下的士兵高程值            |

<img src="./figs/tk3.png" alt="tk3" style="zoom:50%;" />

##### （6）表示例

![sol2](./figs/sol2.png)



### 7. 特朗普信息初始化数据库

##### （1）数据库文件

> trump_init.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库是记录初始化时各个特朗普的名称、ID、通讯地址之间的关系，数据库名称不需要变更。

##### （4）表名称

> - 对每次的 UE4 任务，需要给各个特朗普的名称、ID、通讯地址之间的关系建立一个新表。
> - 表的名称可以随意取，例如 ”task1”。

##### （5）表数据类型

| 字段名称 | 类型 | 说明                                                      |
| -------- | ---- | --------------------------------------------------------- |
| ID       | INT  | 特朗普编号                                                |
| NAME     | CHAR | 特朗普名称                                                |
| IP       | CHAR | 特朗普所在环境的 IP                                       |
| PORT     | INT  | 特朗普对应的端口                                          |
| OX       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 x 分量，单位是 cm |
| OY       | REAL | UE4 动态坐标系原点在 UE4 静态坐标系中的 y 分量，单位是 cm |
| OZ       | RAEL | UE4 动态坐标系原点在 UE4 静态坐标系中的 z 分量，单位是 cm |

<img src="./figs/tk1.png" alt="tk1" style="zoom:50%;" />

##### （6）表示例

<img src="./figs/tp1.png" alt="tp1" style="zoom:50%;" />



### 8. 特朗普实时数据存储数据库

##### （1）数据库文件

> trump_record.db  当前位于程序根目录下

##### （2）数据库类型

> 当前采用轻型的 sqlite3 数据库，本地 Python 程序可以直接访问 db 格式数据库文件的相关数据，未来考虑高性能数据库性能的话，可以更换数据库类型。

##### （3）数据库作用

> 这个数据库用来记录是各个特朗普的实时状况数据，对于不同的任务可以创建新的数据库，用程序手动创建，也可以不换数据库，因为时间不同，记录的数据的意义也不同。

##### （4）表名称

> 每个特朗普都有一个表来单独记录各自数据，表的名称就是特朗普 id 编号，例如 “ID0” 或 “ID1“。

##### （5）表数据类型

| 字段名称  | 类型 | 说明                                       |
| --------- | ---- | ------------------------------------------ |
| ID        | INT  | 特朗普编号                                 |
| NAME      | CHAR | 特朗普名称                                 |
| IP        | CHAR | 特朗普所在环境的 IP                        |
| PORT      | INT  | 特朗普对应的端口                           |
| TIME      | CHAR | 记录的时间                                 |
| TIMESTAMP | INT  | 记录的时间戳，可用于排序                   |
| PX        | REAL | 特朗普在静态坐标系中 x 分量的值，单位是 cm |
| PY        | REAL | 特朗普在静态坐标系中 y 分量的值，单位是 cm |
| PZ        | REAL | 特朗普在静态坐标系中 z 分量的值，单位是 cm |
| ROLL      | REAL | 特朗普的 roll 姿态角                       |
| PITCH     | REAL | 特朗普的 pitch 姿态角                      |
| YOW       | REAL | 特朗普的 yow 姿态角                        |
| LNG       | REAL | WGS84 GPS坐标系下的特朗普经度值            |
| LAT       | REAL | WGS84 GPS坐标系下的特朗普纬度值            |
| ALT       | RAEL | WGS84 GPS坐标系下的特朗普高程值            |

<img src="./figs/tk3.png" alt="tk3" style="zoom:50%;" />

##### （6）表示例

![tp2](./figs/tp2.png)